{% load static %}
<!DOCTYPE html>
<html lang="zxx">

  <head>
      <meta charset="UTF-8">
      <meta name="description" content="Deerhost Template">
      <meta name="keywords" content="Deerhost, unica, creative, html">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <title>{% block title %}EarlyCareerJobs{% endblock title %}</title>

      <!-- Google Font -->
      <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700,800,900&display=swap"
          rel="stylesheet">

      <!-- Css Styles -->
      <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/elegant-icons.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/flaticon.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/slicknav.min.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/style.css' %}" type="text/css">
      <link rel="stylesheet" href="{% static 'css/style_additions.css' %}" type="text/css">

      {% block extra_head %}{% endblock extra_head %}
  </head>


<body>
  <div id="preloder">
    <div class="loader"></div>
  </div>

  <!-- Offcanvas Menu Begin -->
  <div class="offcanvas__menu__overlay"></div>
  <div class="offcanvas__menu__wrapper">
      <div class="canvas__close">
          <span class="fa fa-times-circle-o"></span>
      </div>
      <div class="offcanvas__logo">
          <a href="{% url 'home.index' %}"><img src="{% static 'img/logo.png' %}" alt=""></a>
      </div>
      <nav class="offcanvas__menu mobile-menu">
        {% block mobile_nav %}
        <ul>
            <li><a href="{% url 'home.index' %}">Home</a></li>
            <li><a href="{% url 'jobs.index' %}">Jobs</a></li>
            {% if user.is_authenticated %}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  <i class="fas fa-user-circle me-1"></i> {{ user.username }}
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                  {% if user.is_staff or user.is_superuser %}
                    <li><a class="dropdown-item" href="{% url 'users.user_management' %}">Manage</a></li>
                    <li><hr class="dropdown-divider"></li>
                  {% endif %}
                  {% if user.is_job_seeker %}
                    <li><a class="dropdown-item" href="{% url 'privacy_settings' %}"><i class="fas fa-lock me-1"></i> Privacy Settings</a></li>
                    <li><hr class="dropdown-divider"></li>
                  {% endif %}
                  <li>
                    <form id="logout-form" method="post" action="{% url 'users.logout' %}">
                      {% csrf_token %}
                      <button type="submit" class="dropdown-item">Logout</button>
                    </form>
                  </li>
                </ul>
              </li>
            {% else %}
              <a class="nav-link me-2" href="{% url 'users.login' %}">
                <i class="fas fa-sign-in-alt me-1"></i> Login
              </a>
              <a class="nav-link" href="{% url 'users.register' %}">
                <i class="fas fa-user-plus me-1"></i> Register
              </a>
              {% if user.is_recruiter or user.is_admin %}
                <li><a href="{% url 'candidates.search' %}">Candidates</a></li>
              {% endif %}
            {% endif %}
            <li><a href="{% url 'map.index' %}">Map</a></li>
            {% if user.is_authenticated %}
            <li class="dropdown">
                <a href="#">
                    <span class="fa fa-user"></span> {{ user.username }}
                </a>
                <ul class="dropdown">
                    {% if user.is_admin %}
                      <li><a href="{% url 'users.user_management' %}"><i class="fa fa-users"></i> Manage Users</a></li>
                    {% endif %}
                    
                    {% if user.is_job_seeker %}
                      <li><a class="dropdown-item" href="{% url 'profile.view' username=request.user.username %}"> My Profile</a></li>
                      <li><a class="dropdown-item" href="{% url 'home.inbox' %}">Inbox
                        {% if unread_messages_count > 0 %}
                          <span class="badge bg-danger ms-1">{{ unread_messages_count }}</span>
                        {% endif %}
                      </a></li>
                      <li><a class="dropdown-item" href="{% url 'privacy_settings' %}">Privacy Settings</a></li>
                      <li><a class="dropdown-item" href="{% url 'jobs.track_applications' id=request.user.id %}">Track Applications</a></li>
                    {% elif user.is_recruiter %}
                      <li><a class="dropdown-item" href="{% url 'jobs.create' %}">Post a Job</a></li>
                      <li><a href="{% url 'saved_searches' %}">Saved Searches</a></li>
                      <li><a class="dropdown-item" href="{% url 'home.message_compiler' %}">Message a Candidate</a></li>
                      <li><a href="{% url 'jobs.application_board_redirect' %}">Application Board</a></li>
                    {% elif user.is_admin %}
                      <li><a href="{% url 'jobs.create' %}">Post a Job</a></li>
                      <li><a href="{% url 'jobs.application_board_redirect' %}">Application Board</a></li>
                    {% endif %}
                    <li>
                        <form id="logout-form-mobile" method="post" action="{% url 'users.logout' %}">
                            {% csrf_token %}
                            <button type="submit" class="dropdown-logout-btn" style="border:none; background:none; cursor: pointer; display:block; width: 100%; text-align: left; padding: 5px 15px; color: white;">Logout</button>
                        </form>
                    </li>
                </ul>
            </li>
            {% else %}
            <li>
                <a href="{% url 'users.login' %}">
                    <i class="fas fa-sign-in-alt me-1"></i> Login
                </a>
            </li>
            <li>
                <a href="{% url 'users.register' %}">
                    <i class="fas fa-user-plus me-1"></i> Register
                </a>
            </li>
            {% endif %}
        </ul>
      </nav>
      </div>
      {% endblock mobile_nav %}
  {% block header %}
  <!-- Offcanvas Menu End -->

  <!-- Header Section Begin -->
  <header class="header-section header-normal">
    <div class="header__info">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="header__info-left">
                        <ul>
                            <!-- <li><span class="icon_phone"></span> +1 123-456-7890</li>
                            <li><span class="fa fa-envelope"></span> Support@gmail.com</li> -->
                        </ul>
                    </div>
                </div>
     
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-3">
                <div class="header__logo">
                    <a href="{% url 'home.index' %}"><img src="{% static 'img/logo.png' %}" alt="ecj logo"></a>
                </div>
            </div>
            <div class="col-lg-9 col-md-9">
                <nav class="header__menu">
                  {% block nav_links %}
                    <ul>
                        <li class = "{% if request.resolver_match.url_name == 'home.index' %}active{% endif %}"><a href="{% url 'home.index' %}">Home</a></li>
                        <li class = "{% if request.resolver_match.url_name == 'jobs.index' %}active{% endif %}"><a href= "{% url 'jobs.index' %}">Jobs</a></li>
                        {% if user.is_authenticated %}
                          {% if user.is_recruiter or user.is_admin %}
                            <li class = "{% if request.resolver_match.url_name == 'candidates.search' %}active{% endif %}"><a href="{% url 'candidates.search' %}">Candidates</a></li>
                          {% endif %}
                        {% endif %}
                        <li class = "{% if request.resolver_match.url_name == 'map.index' %}active{% endif %}"><a href="{% url 'map.index' %}">Map</a></li>
                        
                        {% if user.is_authenticated %}
                          <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                              <span class="fa fa-user"></span> {{ user.username }}
                            </a>
                            <ul class="dropdown" style="width: 200px;">
                              {% if user.is_admin %}
                                <li><a href="{% url 'users.user_management' %}"><i class="fa fa-users"></i> Manage Users</a></li>
                              {% endif %}
                              
                              {% if user.is_job_seeker %}
                                <li><a href="{% url 'profile.view' username=request.user.username %}" style="text-align: left; padding-left: 15px;">My Profile</a></li>
                                <li><a href="{% url 'home.inbox' %}" style="text-align: left; padding-left: 15px;">Inbox
                                  {% if unread_messages_count > 0 %}
                                    <span class="badge bg-danger ms-1">{{ unread_messages_count }}</span>
                                  {% endif %}
                                </a></li>
                                <li><a href="{% url 'privacy_settings' %}" style="text-align: left; padding-left: 15px;">Privacy Settings</a></li>
                                <li><a href="{% url 'jobs.track_applications' id=request.user.id %}" style="text-align: left; padding-left: 15px;">Track Applications</a></li>
                              {% elif user.is_recruiter %}
                                <li><a href="{% url 'jobs.create' %}" style="text-align: left; padding-left: 15px;">Post a Job</a></li>
                                <li><a href="{% url 'saved_searches' %}" style="text-align: left; padding-left: 15px;">Saved Searches</a></li>
                                <li><a href="{% url 'notifications' %}" style="text-align: left; padding-left: 15px;">
                                  Notifications
                                  {% if unread_notifications_count > 0 %}
                                    <span class="badge bg-danger ms-1">{{ unread_notifications_count }}</span>
                                  {% endif %}
                                </a></li>
                                <li><a href="{% url 'home.message_compiler' %}" style="text-align: left; padding-left: 15px;">Message a Candidate</a></li>
                                <li><a href="{% url 'jobs.application_board_redirect' %}" style="text-align: left; padding-left: 15px;">Application Board</a></li>
                              {% elif user.is_admin %}
                                <li><a href="{% url 'jobs.create' %}" style="text-align: left; padding-left: 15px;">Post a Job</a></li>
                                <li><a href="{% url 'jobs.application_board_redirect' %}" style="text-align: left; padding-left: 15px;">Application Board</a></li>
                              {% endif %}

                              <li>
                                <form id="logout-form-desktop" method="post" action="{% url 'users.logout' %}">
                                  {% csrf_token %}
                                  <button type="submit" class="dropdown-logout-btn">Logout</button>
                                </form>
                              </li>
                            </ul>
                          </li>
                        {% else %}
                          
                          <li class = "{% if request.resolver_match.url_name == 'users.register' %}active{% endif %}"><a href="{% url 'users.register' %}"><span class="fa fa-user"></span> Register</a></li>
                          <li class = "{% if request.resolver_match.url_name == 'users.login' %}active{% endif %}"><a href="{% url 'users.login' %}"><span class="fa fa-user"></span> Login</a></li>
                        {% endif %}
                    </ul>
                  {% endblock nav_links %}
                </nav>
            </div>
        </div>
        <div class="canvas__open">
            <span class="fa fa-bars"></span>
        </div>
    </div>
</header>
<!-- Header End -->
{% endblock header %}

{% if user.is_authenticated and user.is_recruiter and unread_notifications_count > 0 %}
<div class="alert alert-info alert-dismissible fade show m-0 rounded-0 border-0 border-bottom" role="alert" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none !important;">
  <div class="container">
    <div class="d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center">
        <i class="bi bi-bell-fill me-2" style="font-size: 1.5rem;"></i>
        <div>
          <strong>You have {{ unread_notifications_count }} new notification{{ unread_notifications_count|pluralize }}!</strong>
          <p class="mb-0 small">New candidates match your saved searches.</p>
        </div>
      </div>
      <div class="d-flex gap-2 align-items-center">
        <a href="{% url 'notifications' %}" class="btn btn-light btn-sm">
          <i class="bi bi-eye"></i> View Notifications
        </a>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    </div>
  </div>
</div>
{% endif %}

{% block content %}
{% endblock content %}

{% block footer %}
  <!-- Footer Section Begin -->
  <footer class="footer-section">
    <div class="footer__top">
        <div class="container">
            </div>
        </div>
    </div>
    <div class="footer__text set-bg" data-setbg="{% static 'img/footer-bg.png' %}">
        <div class="container">
            <div class="row">
              <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="footer__text-widget">
                  <h5>About Us</h5>
                  <p>Early Career Jobs is a platform dedicated to connecting recent graduates and early career professionals with job opportunities that align with their skills and aspirations. Our mission is to empower the next generation of talent by providing a seamless job search experience and fostering meaningful connections between job seekers and employers.</p>
                  <p>Email: Support@gmail.com</p>
                </div>
              </div>

              <div class="col-lg-2 col-md-6 col-sm-6">
                <div class="footer__text-widget">
                  <h5>Quick Links</h5>
                  <ul>
                    <li><a href="{% url 'home.index' %}">Home</a></li>
                    <li><a href="{% url 'jobs.index' %}">Find Jobs</a></li>
                    <li><a href="{% url 'map.index' %}">Map</a></li>
                    {% if request.user.is_admin or request.user.is_recruiter %}
                      <li><a href="{% url 'candidates.search' %}">Candidates</a></li>
                    {% endif %}
                  </ul>
                </div>
              </div>

              <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="footer__text-widget">
                  <h5>Join Our Community</h5>
                  <p>Stay updated with the latest job postings, career advice, and industry insights by subscribing to our newsletter. Join our community of early career professionals and take the next step in your career journey with Early Career Jobs.</p>
                  <div class="footer__social"></div>
                </div>
              </div>

              <div class="col-lg-2 col-md-6 col-sm-6">
                <div class="footer__text-widget">
                  <h5>Our Creaters</h5>
                  <p>Shreema Vijayakumar<br>
                    Cinthya C Amaya <br>
                    Dylan D Bracey <br>
                    Yashaswini Pandibabu <br>
                    Jennefer Bennet <br>
                    Yuhan Wei</p>
                </div>
              </div>

            </div>
            <div class="footer__text-copyright"></div>
        </div>
    </div>
</footer>
<!-- Footer Section End -->
{% endblock footer %}
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script src="{% static 'js/jquery.slicknav.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
{% block extra_js %}
{% endblock extra_js %}

</body>

<style>
  .header__menu ul li .dropdown {
    text-align: left;
  }
  .header__menu ul li .dropdown li {
    display: block;
    text-align: left;
  }
  .dropdown-logout-btn {
    border: none;
    background: none;
    cursor: pointer;
    display: block;
    width: 100%;
    padding: 5px 15px;
    color: #111111;
    text-align: left;
  }
</style>
</html>
